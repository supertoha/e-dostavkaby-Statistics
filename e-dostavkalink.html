<html><head>
<meta charset="utf-8"/>
<style type="text/css">
.draganddrop {
  position: absolute;
  visibility: hidden;
    text-decoration: none;
    color: #007bff;
}
.draganddrop:visited {
text-decoration: none;
}

.draganddrop:before {
  content: "Перетяни меня в закладки";
  visibility: visible;
  font-size: 25px;  
    text-decoration: none;
}

.container {
     position: absolute;
     margin: auto;
     top: 0;
     right: 0;
     bottom: 0;
     left: 0;
     width: 300px;
     height: 300px;
}
  </style></head><body><div class="container"><a class="draganddrop" href="javascript:async function getData(a){return $.ajax({url:a,type:&#39;GET&#39;})}async function getProductInfo(a,b){const c=await getData(a);return{url:a,category:$(&#39;.breadcrumbs&#39;,c).children(&#39;a&#39;).eq(2).text(),id:b,price:$(&#39;.price meta&#39;,c).attr(&#39;content&#39;)}}async function buildMoneyPerMonthChart(b){const c=[&#39;\u042F\u043D\u0432\u0430\u0440\u044C&#39;,&#39;\u0424\u0435\u0432\u0440\u0430\u043B\u044C&#39;,&#39;\u041C\u0430\u0440\u0442&#39;,&#39;\u0410\u043F\u0440\u0435\u043B\u044C&#39;,&#39;\u041C\u0430\u0439&#39;,&#39;\u0418\u044E\u043D\u044C&#39;,&#39;\u0418\u044E\u043B\u044C&#39;,&#39;\u0410\u0432\u0433\u0443\u0441\u0442&#39;,&#39;\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C&#39;,&#39;\u041E\u043A\u0442\u044F\u0431\u0440\u044C&#39;,&#39;\u041D\u043E\u044F\u0431\u0440\u044C&#39;,&#39;\u0414\u0435\u043A\u0430\u0431\u0440\u044C&#39;];let f=new Date(-864e13),g=new Date(864e13);for(let a=0;a&lt;b.length;a++)b[a].date&gt;=f&amp;&amp;(f=b[a].date),b[a].date&lt;=g&amp;&amp;(g=b[a].date);var h=f.getMonth()+12*f.getFullYear()-(g.getMonth()+12*g.getFullYear()),j=[];for(let a=0;a&lt;=h;a++){var k=new Date(g.getFullYear(),g.getMonth()+a,1),m=0;for(let a=0;a&lt;b.length;a++)b[a].date.getMonth()===k.getMonth()&amp;&amp;b[a].date.getFullYear()===k.getFullYear()&amp;&amp;(m+=b[a].price);var n=c[k.getMonth()]+&#39; &#39;+k.getFullYear().toString();j.push({label:n,y:m})}$(&#39;#chartContainer&#39;).CanvasJSChart({animationEnabled:!0,title:{text:&#39;\u0420\u0430\u0441\u0445\u043E\u0434\u044B \u0432 \u043C\u0435\u0441\u044F\u0446&#39;},axisY:{title:&#39;\u0440\u0430\u0441\u0445\u043E\u0434\u044B&#39;,suffix:&#39;\u0440&#39;,includeZero:!1},axisX:{title:&#39;\u041C\u0435\u0441\u044F\u0446\u044B&#39;},data:[{type:&#39;column&#39;,dataPoints:j}]})}function buildPriceChangeChart(b,f){var e=[],g=0;for(const a of f){var h=[],i=-1/0,j=1/0,k=&#39;&#39;;for(const c of b)if(a.id===c.id){if(!isNaN(parseFloat(a.price))&amp;&amp;0===h.length){var m=parseFloat(a.price)/c.quantity;h.push({y:m,x:new Date})}k=c.title;var l=c.price/c.quantity;h.push({y:l,x:c.date}),l&lt;=j&amp;&amp;(j=l),l&gt;=i&amp;&amp;(i=l)}var d=(i-j)/i;d&gt;=g&amp;&amp;(g=d),e.push({label:k+&#39; \u0430\u0440\u0442. &#39;+a.id,name:k,points:h,priceChangeRate:d})}var c=e.find(a=&gt;a.priceChangeRate===g);$(&#39;#productDropDown&#39;).autocomplete({source:e,minLength:2,focus:function(){return!1},select:function(a,b){return $(&#39;#productDropDown&#39;).val(b.item.name),drawPriceChangeChart(b.item.points,b.item.name),!1}}),$(&#39;#productDropDown&#39;).val(c.name),$(&#39;#productDropDown&#39;).dblclick(function(){$(&#39;#productDropDown&#39;).val(&#39;&#39;)}),drawPriceChangeChart(c.points,c.name)}function drawPriceChangeChart(a,b){$(&#39;#priceChangeChartContainer&#39;).CanvasJSChart({animationEnabled:!0,theme:&#39;light2&#39;,title:{text:&#39;\u0414\u0438\u043D\u0430\u043C\u0438\u043A\u0430 \u0446\u0435\u043D\u044B \u0442\u043E\u0432\u0430\u0440\u0430&#39;},axisX:{valueFormatString:&#39;DD MMM&#39;},axisY:{title:&#39;\u0426\u0435\u043D\u0430 \u0442\u043E\u0432\u0430\u0440\u0430, \u0440&#39;,suffix:&#39;\u0440&#39;,minimum:0},toolTip:{shared:!0},legend:{cursor:&#39;pointer&#39;,verticalAlign:&#39;bottom&#39;,horizontalAlign:&#39;left&#39;,dockInsidePlotArea:!0},data:[{type:&#39;line&#39;,showInLegend:!0,name:b,markerType:&#39;square&#39;,xValueFormatString:&#39;DD MMM, YYYY&#39;,color:&#39;#F08080&#39;,yValueFormatString:&#39;0.00&#39;,dataPoints:a}]})}function findCategory(a,b){for(let c=0;c&lt;a.length;c++)if(a[c].url===b)return a[c].category}function buildMoneyPerCategory(b,c){var d=[],e=0;for(let a=0;a&lt;b.length;a++){var f=b[a];if(!isNullOrEmpty(f.url)){var g=findCategory(c,f.url);isNullOrEmpty(g)||(void 0===d[g]&amp;&amp;(d[g]=0),d[g]+=f.price,e+=f.price)}}var h=[];for(curCategory in d)h.push({label:curCategory,y:(100*d[curCategory]/e).toFixed(2)});$(&#39;#chartContainerPie&#39;).CanvasJSChart({title:{text:&#39;\u0420\u0430\u0441\u0445\u043E\u0434\u044B \u043F\u043E \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F\u043C&#39;},data:[{type:&#39;pie&#39;,startAngle:45,showInLegend:&#39;true&#39;,legendText:&#39;{label}&#39;,indexLabel:&#39;{label} ({y})&#39;,yValueFormatString:&#39;0.0&#39;,dataPoints:h}]})}function parseDate(b){var c=b.split(&#39; &#39;,3),d=c[0],e=[&#39;\u044F\u043D\u0432\u0430\u0440\u044F&#39;,&#39;\u0444\u0435\u0432\u0440\u0430\u043B\u044F&#39;,&#39;\u043C\u0430\u0440\u0442\u0430&#39;,&#39;\u0430\u043F\u0440\u0435\u043B\u044F&#39;,&#39;\u043C\u0430\u044F&#39;,&#39;\u0438\u044E\u043D\u044F&#39;,&#39;\u0438\u044E\u043B\u044F&#39;,&#39;\u0430\u0432\u0433\u0443\u0441\u0442\u0430&#39;,&#39;\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F&#39;,&#39;\u043E\u043A\u0442\u044F\u0431\u0440\u044F&#39;,&#39;\u043D\u043E\u044F\u0431\u0440\u044F&#39;,&#39;\u0434\u0435\u043A\u0430\u0431\u0440\u044F&#39;].indexOf(c[1]),a=c[2];return new Date(a,e,d)}function main(){&#39;e-dostavka.by&#39;===window.location.hostname?$(&#39;.wrapper&#39;).html(&#39;&lt;a id=startButton class=ui-button style=font-size:250%;margin:100px;20px; onclick=javascript:buildStat() href=#&gt;\u0421\u043E\u0431\u0440\u0430\u0442\u044C \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0443&lt;/a&gt;&lt;div id=progresscontainer style=margin:100px;20px;display:none;font-size:14px;&gt;&lt;div id=messageBox style=font-size:16px;font-color:#a01919&gt;&lt;/div&gt;&lt;div id=progressbar&gt;&lt;/div&gt;&lt;/div&gt;&lt;div id=answerContainer style=display:none;&gt;&lt;div style=margin:30px;5px;&gt;&lt;div id=chartContainer style=height:370px;width:100%;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=margin:30px;5px;&gt;&lt;div id=chartContainerPie style=height:370px;width:100%;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=margin:30px;5px;&gt;&lt;div style=width:100%;&gt;&lt;label for=productDropDown style=min-width:100px;font-size:16px;width:20%;&gt;\u041F\u0440\u043E\u0434\u0443\u043A\u0442: &lt;/label&gt;&lt;input id=productDropDown style=width:80%;&gt;&lt;/div&gt;&lt;div id=priceChangeChartContainer style=height:370px;width:100%;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;script src=https://code.jquery.com/ui/1.12.1/jquery-ui.js&gt;&lt;/script&gt;&lt;script src=https://canvasjs.com/assets/script/jquery.canvasjs.min.js&gt;&lt;/script&gt;&#39;):alert(&#39;\u0421\u043A\u0440\u0438\u043F\u0442 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442 \u0442\u043E\u043B\u044C\u043A\u043E \u043D\u0430 e-dostavka.by&#39;)}function isNullOrEmpty(a){return void 0===a||&#39;&#39;===a}async function buildStat(){$(&#39;#progressbar&#39;).progressbar({value:0}),$(&#39;#progresscontainer&#39;).show(),$(&#39;#startButton&#39;).hide(),$(&#39;#messageBox&#39;).html(&#39;\u0418\u0434\u0435\u0442 \u0441\u0431\u043E\u0440 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0438, \u044D\u0442\u043E \u043C\u043E\u0436\u0435\u0442 \u0437\u0430\u043D\u044F\u0442\u044C \u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u043C\u0438\u043D\u0443\u0442...&#39;);var b=[],j=[];const e=await getData(&#39;https://e-dostavka.by/cabinet/history/&#39;);var k=$(&#39;.number a&#39;,e),a=k.length;if(0!==a){for(let e=0;e&lt;a;e++){var i=$(k[e]).attr(&#39;href&#39;);const r=await getData(i);if($(&#39;#progressbar&#39;).progressbar({value:100*e/a}),0&lt;$(&#39;.fa-home&#39;,r).length){var n=$(&#39;.date_order&#39;,r);n.find(&#39;b&#39;).remove();var o=parseDate(n.text()),l=$(&#39;.description&#39;,r);for(let a=0;a&lt;l.length;a++){var d=$(&#39;.itog&#39;,l[a]);d.find(&#39;strong&#39;).remove(),d.find(&#39;b&#39;).remove();var c=$(&#39;.cent&#39;,d).text();d.find(&#39;span&#39;).remove();var p=d.text(),q=parseFloat(p)+parseFloat(c)/100,h=$(&#39;.title&#39;,l[a]).text(),g=$(&#39;.title a&#39;,l[a]).attr(&#39;href&#39;),s=$(&#39;.row-item&#39;,l[a]).filter(function(){return&#39;\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E:&#39;===$(&#39;strong&#39;,this).text().trim()});s.find(&#39;strong&#39;).remove(),s.find(&#39;span&#39;).remove();var f=parseFloat(s.text()),m=$(&#39;.row-item&#39;,l[a]).filter(function(){return&#39;\u0410\u0440\u0442\u0438\u043A\u0443\u043B:&#39;===$(&#39;strong&#39;,this).text().trim()});m.find(&#39;strong&#39;).remove();var u=m.text().trim();if(0===j.filter(a=&gt;a.id===u).length&amp;&amp;!isNullOrEmpty(g)){const a=await getProductInfo(g,u);j.push(a)}b.push({date:o,title:h,url:g,price:q,quantity:f,id:u})}}}$(&#39;#progresscontainer&#39;).hide(),$(&#39;#answerContainer&#39;).show(),buildMoneyPerMonthChart(b,j),buildMoneyPerCategory(b,j),buildPriceChangeChart(b,j)}else $(&#39;#messageBox&#39;).html(&#39;\u041D\u0435\u0442 \u0434\u043E\u0441\u0442\u0443\u043F\u0430 \u043A \u0438\u0441\u0442\u043E\u0440\u0438\u0438 \u0437\u0430\u043A\u0430\u0437\u043E\u0432 \u0438\u043B\u0438 \u0438\u0441\u0442\u043E\u0440\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u043E\u0432 \u043F\u0443\u0441\u0442\u0430.&#39;)}main();" title="Перетяни меня в закладки">e-dostavka Статистика</a></div></body></html>
